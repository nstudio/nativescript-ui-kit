import { View } from '@nativescript/core';
import { DemoSharedBase } from '../utils';
import { Smartlook } from '@nstudio/nativescript-smartlook';

export class DemoSharedNativescriptSmartlook extends DemoSharedBase {
  stop() {
    Smartlook.stop();
  }

  start() {
    Smartlook.start('<api-key>');
  }

  logSessionUrl() {
    console.log(Smartlook.sessionUrl());
  }

  logRenderingMode() {
    console.log(Smartlook.getRenderingMode());
  }

  setUserProperties() {
    Smartlook.setUser('12345-abcde', 'Testing Account', 'testing@bigtest.org', {
      extra: 'details',
      moreInfo: 'hello',
    });
  }

  setViewSensitivity(view: View) {
    Smartlook.setSensitivity(view, true);
  }

  loadedSensitiveArea(args) {
    this.setViewSensitivity(args.object);
  }

  trackEvent() {
    Smartlook.trackEvent('testEvent', {
      some: 'properties',
      more: 'info',
    });
  }

  trackNavigationEvent() {
    Smartlook.trackNavigationEvent('testNavigationEvent', {
      some: 'properties',
      more: 'info',
    });
  }
}
